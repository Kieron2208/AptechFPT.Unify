<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<databaseChangeLog
    xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext"
    xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog 
                        http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.0.xsd
                        http://www.liquibase.org/xml/ns/dbchangelog-ext 
                        http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd">
    
    <changeSet author="kierontran" id="2">
        <loadData encoding="UTF-8"
                  file="config/liquibase/category.csv"
                  separator=";"
                  tableName="Category"/>
        <loadData encoding="UTF-8"
                  file="config/liquibase/subcategory.csv"
                  separator=";"
                  tableName="SubCategory"/>
        <loadData encoding="UTF-8"
                  file="config/liquibase/product.csv"
                  separator=";"
                  tableName="Product"/>
        <loadData encoding="UTF-8"
                  file="config/liquibase/pricehistory.csv"
                  separator=","
                  tableName="PriceHistory"/>
        <loadData encoding="UTF-8"
                  file="config/liquibase/image.csv"
                  separator=","
                  tableName="Image"/>
        <loadData encoding="UTF-8"
                  file="config/liquibase/role.csv"
                  separator=","
                  tableName="Role"/>
        <loadData encoding="UTF-8"
                  file="config/liquibase/account.csv"
                  separator=","
                  tableName="Account">
            <column name="CreatedDate" type="datetime2(7)"/>
        </loadData>
        <ext:loadData encoding="UTF-8"
                file="config/liquibase/accountrole.csv" 
                separator=","
                tableName="AccountRole" 
                identityInsertEnabled="true" />
        <loadData encoding="UTF-8"
                  file="config/liquibase/comment.csv"
                  separator=","
                  tableName="Comment"/>
        <loadData encoding="UTF-8"
                  file="config/liquibase/feedback.csv"
                  separator=","
                  tableName="FeedBack"/>
        <loadData encoding="UTF-8"
                  file="config/liquibase/purchaseorder.csv"
                  separator=","
                  tableName="PurchaseOrder">
            <column name="AccountId" type="NUMERIC"/>
        </loadData>
        <loadData encoding="UTF-8"
                  file="config/liquibase/purchaseorderdetail.csv"
                  separator=","
                  tableName="PurchaseOrderDetail">
        </loadData>
        <sql>
            UPDATE PurchaseOrder SET AccountId = NULL WHERE AccountId = 2
        </sql>
        <rollback>
            <delete tableName="PriceHistory"/>
            <delete tableName="PurchaseOrderDetail"/>
            <delete tableName="PurchaseOrder"/>
            <delete tableName="Image"/>
            <delete tableName="FeedBack"/>
            <delete tableName="Comment"/>
            <delete tableName="AccountRole"/>
            <delete tableName="Product"/>
            <delete tableName="SubCategory"/>
            <delete tableName="Category"/>
            <delete tableName="Account"/>
            <delete tableName="Role"/>
        </rollback>
    </changeSet>

</databaseChangeLog>
